<!DOCTYPE html>  
<html lang="hi">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>300</title>  

<link rel="manifest" href="manifest.json">  
<meta name="theme-color" content="#4CAF50">    <!-- Mobile / iOS support -->    
<meta name="apple-mobile-web-app-capable" content="yes">  
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  
<link rel="apple-touch-icon" href="assets/icon-192.png">  
<style>  
html,body{margin:0;height:100%;overflow:hidden;font-family:sans-serif}  
body{display:flex;flex-direction:column;background:#fff}  
  
/* ===== TOP BAR ===== */  
#top{  
  background:#4CAF50;color:#fff;  
  padding:6px 10px;  
  display:flex;align-items:center;gap:8px  
}  
#nameBtn,#helpBtn{  
  background:#fff;color:#4CAF50;  
  border:none;border-radius:6px;  
  padding:4px 10px;font-weight:bold  
}  
#planInfo{  
  flex:1;  
  text-align:center;  
  font-size:13px;  
}  
  
/* ===== MODES ===== */  
#modes{display:flex;background:#388E3C}  
#modes button{  
  flex:1;border:none;background:none;color:#fff;  
  padding:10px 0;font-size:14px  
}  
  
/* ===== STAGE ===== */  
#stage{flex:1;position:relative}  
canvas{  
  position:absolute;left:0;top:0;  
  width:100%;height:100%;  
  touch-action:none;  
}  
  
/* ===== LICENSE OVERLAY ===== */  
#license{  
  position:fixed;  
  inset:0;  
  background:#fff;  
  z-index:999;  
  display:none;  
  overflow:auto;  
  padding:20px;  
}  
#license h2{text-align:center}  
#card{  
  max-width:360px;  
  margin:10px auto;  
  background:#673AB7;  
  color:#fff;  
  border-radius:14px;  
  padding:20px;  
  text-align:center  
}  
#contact{  
  max-width:360px;  
  margin:20px auto;  
  background:#e8f5e9;  
  padding:15px;  
  border-radius:12px;  
  text-align:center  
}  
#contact button{  
  border:none;border-radius:8px;  
  padding:10px 14px;  
  margin:6px;  
  font-size:14px;  
  color:#fff  
}  
.call{background:#2196F3}  
.wa{background:#4CAF50}  
#license input{  
  padding:10px;  
  font-size:16px;  
  width:90%;  
  max-width:320px;  
}  
/* ===== TOOL BUTTON FINAL CSS ===== */  
.tool{  
  position:absolute;  
  z-index:20;  
  font-size:40px;  
  border:none;  
  border-radius:50%;  
  padding:8px;  
  background:#fafafa;  
  cursor:move;  
  touch-action:none;  
}  
.clear{  
  background:#ff5252;  
  color:#fff;  
}  
/* ===== PAGE NAV BUTTONS ===== */  
.tool.nav{  
  background:#263238;  
  color:#fff;  
  font-size:36px;  
  border:3px solid #FFD600;  
  box-shadow:0 4px 10px rgba(0,0,0,.3);  
}  
  
/* LEFT PAGE BUTTON */  
.tool.prev{  
  left:0;  
}  
  
/* RIGHT PAGE BUTTON */  
.tool.next{  
  right:0;  
}  
</style>  </head>  <body>  <!-- ===== TOP ===== -->  <div id="top">  
  <button id="nameBtn">Name</button>  
  <div id="planInfo">Free Trial</div>  
  <a id="helpBtn" target="_blank">üÜò Help</a>  
</div>  <!-- ===== MODES ===== -->  <div id="modes">  
  <button onclick="setMode('vyanjan')">‡§µ‡•ç‡§Ø‡§Ç‡§ú‡§®</button>  
  <button onclick="setMode('swar')">‡§∏‡•ç‡§µ‡§∞</button>  
  <button onclick="setMode('matra')">‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ‡§è‡§Å</button>  
  <button onclick="setMode('count')">‡§ó‡§ø‡§®‡§§‡•Ä</button>  
  <button onclick="setMode('abc')">ABC</button>  
  <button onclick="setMode('art')">‡§Ü‡§∞‡•ç‡§ü</button>  
</div>  <!-- ===== GAME STAGE ===== -->  <div id="stage">  
  <canvas id="base"></canvas>  
  <canvas id="draw"></canvas>  <button class="tool" data-tool="pen" onclick="cycleSize()">‚úèÔ∏è</button>
<button class="tool" data-tool="pattern" onclick="cyclePattern()">üé≠</button>
<button class="tool" data-tool="color" onclick="cycleColor()">üé®</button>
<button class="tool clear" data-tool="clear" id="clearBtn">üßπ</button>
<button class="tool" data-tool="eraser" onclick="eraser()">üßΩ</button>
<button class="tool nav prev" data-tool="prev" onclick="prevPage()">‚¨ÖÔ∏è</button>
<button class="tool nav next" data-tool="next" onclick="nextPage()">‚û°Ô∏è</button>

<!-- ===== LICENSE SCREEN (OVERLAY) ===== -->  <div id="license">  
  <h2>Trial ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ</h2>    <p style="text-align:center">  
    <b>Activation ID:</b><br>  
    <span id="actId"></span>  
  </p>    <div id="card">  
    <h2>Premium Plan</h2>  
    <h1>‚Çπ299 / 1 Year</h1>  
    <p>  
      ‚úî ‡§∏‡§≠‡•Ä ‡§ó‡•á‡§Æ ‡§Ö‡§®‡§≤‡•â‡§ï<br>  
      ‚úî ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§®‡§π‡•Ä‡§Ç<br>  
      ‚úî ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§  
    </p>  
  </div>    <div id="contact">  
    <p><b>Activation Code ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç</b></p>  
    <button class="call" onclick="callNow()">üìû Call ‡§ï‡§∞‡•á‡§Ç</button>  
    <button class="wa" onclick="waNow()">üí¨ WhatsApp ‡§ï‡§∞‡•á‡§Ç</button>  
  </div>    <div style="text-align:center">  
    <input id="code" placeholder="Activation Code (12 ‡§Ö‡§ï‡•ç‡§∑‡§∞)"><br><br>  
    <button onclick="activate()">Activate</button>  
  </div>  
</div>
<input id="yesBox"
  placeholder="YES ‡§≤‡§ø‡§ñ‡•á‡§Ç"
  style="
    position:fixed;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    padding:10px 16px;
    font-size:18px;
    border:2px solid #333;
    border-radius:8px;
    display:none;
    z-index:99999;
  "
>
<script>
/* ================= STORAGE CORE (FINAL) ================= */

let DB = null;
const DB_NAME = "DRAW_APP_DB";
const STORE = "drawings";

/* ---------- INIT ---------- */
(function initDB(){
  try{
    const req = indexedDB.open(DB_NAME,1);

    req.onupgradeneeded = e=>{
      const db = e.target.result;
      if(!db.objectStoreNames.contains(STORE)){
        db.createObjectStore(STORE);
      }
    };

    req.onsuccess = e=>{
      DB = e.target.result;
    };

    req.onerror = ()=>{
      DB = null;
    };
  }catch(e){
    DB = null;
  }
})();

/* ---------- SAVE ---------- */
function storageSave(key,value){
  if(DB){
    try{
      const tx = DB.transaction(STORE,"readwrite");
      tx.objectStore(STORE).put(value,key);
      return;
    }catch(e){
      DB = null;
    }
  }
  localStorage.setItem(key, JSON.stringify(value)); // <-- ‡§Ø‡§π‡•Ä change
}

/* ---------- LOAD ---------- */
function storageLoad(key,callback){
  if(DB){
    try{
      const tx = DB.transaction(STORE,"readonly");
      const req = tx.objectStore(STORE).get(key);
      req.onsuccess = ()=>callback(req.result ?? JSON.parse(localStorage.getItem(key)));
      req.onerror = ()=>callback(JSON.parse(localStorage.getItem(key)));
      return;
    }catch(e){
      DB = null;
    }
  }
  callback(JSON.parse(localStorage.getItem(key)));
}

/* ---------- DELETE ---------- */
function storageDelete(key){
  if(DB){
    try{
      const tx = DB.transaction(STORE,"readwrite");
      tx.objectStore(STORE).delete(key);
      return;
    }catch(e){
      DB = null;
    }
  }
  localStorage.removeItem(key);
}

/* ---------- DELETE BY PREFIX (MODE CLEAR) ---------- */
function storageDeleteByPrefix(prefix){
  if(DB){
    try{
      const tx = DB.transaction(STORE,"readwrite");
      const store = tx.objectStore(STORE);
      store.openCursor().onsuccess = e=>{
        const c = e.target.result;
        if(c){
          const key = String(c.key); // üî• FIX (index 0 issue)
          if(key.startsWith(prefix)){
            store.delete(c.key);
          }
          c.continue();
        }
      };
    }catch(e){
      DB = null;
    }
  }

  Object.keys(localStorage).forEach(k=>{
    if(k.startsWith(prefix)){
      localStorage.removeItem(k);
    }
  });
}
/* ================= DATA ================= */  
 const DATA={  
  vyanjan: [  
  { ch:"‡§ï", voice:"‡§ï" }, { ch:"‡§ñ", voice:"‡§ñ" }, { ch:"‡§ó", voice:"‡§ó" }, { ch:"‡§ò", voice:"‡§ò" }, { ch:"‡§ô", voice:"‡§ô" },  
  { ch:"‡§ö", voice:"‡§ö" }, { ch:"‡§õ", voice:"‡§õ" }, { ch:"‡§ú", voice:"‡§ú" }, { ch:"‡§ù", voice:"‡§ù" }, { ch:"‡§û", voice:"‡§û" },  
  { ch:"‡§ü", voice:"‡§ü" }, { ch:"‡§†", voice:"‡§†" }, { ch:"‡§°", voice:"‡§°" }, { ch:"‡§¢", voice:"‡§¢" }, { ch:"‡§£", voice:"‡§£" },  
  { ch:"‡§§", voice:"‡§§" }, { ch:"‡§•", voice:"‡§•" }, { ch:"‡§¶", voice:"‡§¶" }, { ch:"‡§ß", voice:"‡§ß" }, { ch:"‡§®", voice:"‡§®" },  
  { ch:"‡§™", voice:"‡§™" }, { ch:"‡§´", voice:"‡§´" }, { ch:"‡§¨", voice:"‡§¨" }, { ch:"‡§≠", voice:"‡§≠" }, { ch:"‡§Æ", voice:"‡§Æ" },  
  { ch:"‡§Ø", voice:"‡§Ø" }, { ch:"‡§∞", voice:"‡§∞" }, { ch:"‡§≤", voice:"‡§≤" }, { ch:"‡§µ", voice:"‡§µ" },  
  { ch:"‡§∂", voice:"‡§∂" }, { ch:"‡§∑", voice:"‡§∑" }, { ch:"‡§∏", voice:"‡§∏" }, { ch:"‡§π", voice:"‡§π" },  
  { ch:"‡§ï‡•ç‡§∑", voice:"‡§ï‡•ç‡§∑" }, { ch:"‡§§‡•ç‡§∞", voice:"‡§§‡•ç‡§∞" }, { ch:"‡§ú‡•ç‡§û", voice:"‡§ú‡•ç‡§û" }  
],  
  
  swar: [  
  { ch:"‡§Ö", voice:"‡§Ö" }, { ch:"‡§Ü", voice:"‡§Ü" }, { ch:"‡§á", voice:"‡§á" }, { ch:"‡§à", voice:"‡§à" },  
  { ch:"‡§â", voice:"‡§â" }, { ch:"‡§ä", voice:"‡§ä" }, { ch:"‡§ã", voice:"‡§ã" },  
  { ch:"‡§è", voice:"‡§è" }, { ch:"‡§ê", voice:"‡§ê" },  
  { ch:"‡§ì", voice:"‡§ì" }, { ch:"‡§î", voice:"‡§î" },  
  { ch:"‡§Ö‡§Ç", voice:"‡§Ö‡§Ç" }, { ch:"‡§Ö‡§É", voice:"‡§Ö‡§É" }  
],  
  
  matra: [  
  { ch:"‡§æ", voice:"‡§Ü" }, { ch:"‡§ø", voice:"‡§á" }, { ch:"‡•Ä", voice:"‡§à" },  
  { ch:"‡•Å", voice:"‡§â" }, { ch:"‡•Ç", voice:"‡§ä" }, { ch:"‡•É", voice:"‡§ã" },  
  { ch:"‡•á", voice:"‡§è" }, { ch:"‡•à", voice:"‡§ê" },  
  { ch:"‡•ã", voice:"‡§ì" }, { ch:"‡•å", voice:"‡§î" },  
  { ch:"‡§Ç", voice:"‡§Ö‡§Ç" }, { ch:"‡§É", voice:"‡§Ö‡§É" }  
],  
  
  count: [  
  { ch:"1", voice:"‡§µ‡§®" }, { ch:"2", voice:"‡§ü‡•Ç" }, { ch:"3", voice:"‡§•‡•ç‡§∞‡•Ä" }, { ch:"4", voice:"‡§´‡•ã‡§∞" }, { ch:"5", voice:"‡§´‡§æ‡§á‡§µ" },  
  { ch:"6", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"7", voice:"‡§∏‡•á‡§µ‡§®" }, { ch:"8", voice:"‡§è‡§ü" }, { ch:"9", voice:"‡§®‡§æ‡§á‡§®" }, { ch:"10", voice:"‡§ü‡•á‡§®" },  
  
  { ch:"11", voice:"‡§á‡§≤‡•á‡§µ‡§®" }, { ch:"12", voice:"‡§ü‡•ç‡§µ‡•á‡§≤‡•ç‡§µ" }, { ch:"13", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä‡§®" }, { ch:"14", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä‡§®" }, { ch:"15", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä‡§®" },  
  { ch:"16", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä‡§®" }, { ch:"17", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•Ä‡§®" }, { ch:"18", voice:"‡§è‡§ü‡•Ä‡§®" }, { ch:"19", voice:"‡§®‡§æ‡§á‡§®‡•ç‡§ü‡•Ä‡§®" }, { ch:"20", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä" },  
  
  { ch:"21", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"22", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"23", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"24", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"25", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"26", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"27", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"28", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"29", voice:"‡§ü‡•ç‡§µ‡•á‡§Ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"30", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä" },  
  
  { ch:"31", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"32", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"33", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"34", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"35", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"36", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"37", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"38", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"39", voice:"‡§•‡§∞‡•ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"40", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä" },  
  
  { ch:"41", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"42", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"43", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"44", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"45", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"46", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"47", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"48", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"49", voice:"‡§´‡•â‡§∞‡•ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"50", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä" },  
  
  { ch:"51", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"52", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"53", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"54", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"55", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"56", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"57", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"58", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"59", voice:"‡§´‡§ø‡§´‡§º‡•ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"60", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä" },  
  
  { ch:"61", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"62", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"63", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"64", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"65", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"66", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"67", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"68", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"69", voice:"‡§∏‡§ø‡§ï‡•ç‡§∏‡•ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"70", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä" },  
  
  { ch:"71", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"72", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"73", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"74", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"75", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"76", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"77", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"78", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"79", voice:"‡§∏‡•á‡§µ‡•á‡§Ç‡§ü‡•ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"80", voice:"‡§è‡§ü‡•Ä" },  
  
  { ch:"81", voice:"‡§è‡§ü‡•Ä ‡§µ‡§®" }, { ch:"82", voice:"‡§è‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"83", voice:"‡§è‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"84", voice:"‡§è‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"85", voice:"‡§è‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"86", voice:"‡§è‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"87", voice:"‡§è‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"88", voice:"‡§è‡§ü‡•Ä ‡§è‡§ü" }, { ch:"89", voice:"‡§è‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"90", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä" },  
  
  { ch:"91", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§µ‡§®" }, { ch:"92", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§ü‡•Ç" }, { ch:"93", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§•‡•ç‡§∞‡•Ä" }, { ch:"94", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§´‡•ã‡§∞" }, { ch:"95", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§´‡§æ‡§á‡§µ" },  
  { ch:"96", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§∏‡§ø‡§ï‡•ç‡§∏" }, { ch:"97", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§∏‡•á‡§µ‡§®" }, { ch:"98", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§è‡§ü" }, { ch:"99", voice:"‡§®‡§æ‡§á‡§Ç‡§ü‡•Ä ‡§®‡§æ‡§á‡§®" }, { ch:"100", voice:"‡§µ‡§® ‡§π‡§Ç‡§°‡•ç‡§∞‡•á‡§°" }  
],  
  
  abc: [  
  { ch:"A", voice:"‡§è" },  
  { ch:"B", voice:"‡§¨‡•Ä" },  
  { ch:"C", voice:"‡§∏‡•Ä" },  
  { ch:"D", voice:"‡§°‡•Ä" },  
  { ch:"E", voice:"‡§à" },  
  { ch:"F", voice:"‡§è‡§´" },  
  { ch:"G", voice:"‡§ú‡•Ä" },  
  { ch:"H", voice:"‡§è‡§ö" },  
  { ch:"I", voice:"‡§Ü‡§à" },  
  { ch:"J", voice:"‡§ú‡•á" },  
  { ch:"K", voice:"‡§ï‡•á" },  
  { ch:"L", voice:"‡§è‡§≤" },  
  { ch:"M", voice:"‡§è‡§Æ" },  
  { ch:"N", voice:"‡§è‡§®" },  
  { ch:"O", voice:"‡§ì" },  
  { ch:"P", voice:"‡§™‡•Ä" },  
  { ch:"Q", voice:"‡§ï‡•ç‡§Ø‡•Ç" },  
  { ch:"R", voice:"‡§Ü‡§∞" },  
  { ch:"S", voice:"‡§è‡§∏" },  
  { ch:"T", voice:"‡§ü‡•Ä" },  
  { ch:"U", voice:"‡§Ø‡•Ç" },  
  { ch:"V", voice:"‡§µ‡•Ä" },  
  { ch:"W", voice:"‡§°‡§¨‡§≤‡•ç‡§Ø‡•Ç" },  
  { ch:"X", voice:"‡§è‡§ï‡•ç‡§∏" },  
  { ch:"Y", voice:"‡§µ‡§æ‡§à" },  
  { ch:"Z", voice:"‡§ú‡§º‡•á‡§°" }  
],  
  
  art: [  
  { ch:"‚≠ê", voice:"‡§∏‡•ç‡§ü‡§æ‡§∞" },  
  { ch:"üåà", voice:"‡§á‡§Ç‡§¶‡•ç‡§∞‡§ß‡§®‡•Å‡§∑" },  
  { ch:"‚ù§Ô∏è", voice:"‡§¶‡§ø‡§≤" },  
  { ch:"üçã", voice:"‡§®‡•Ä‡§Ç‡§¨‡•Ç" },  
  { ch:"üíã", voice:"‡§π‡•ã‡§Ç‡§†" },  
  { ch:"ü¶¥", voice:"‡§π‡§°‡•ç‡§°‡•Ä" },  
  { ch:"üñêÔ∏è", voice:"‡§™‡§Ç‡§ú‡§æ" },  
  { ch:"üôÇ", voice:"‡§ö‡•á‡§π‡§∞‡§æ" },  
  { ch:"ü•Ñ", voice:"‡§ö‡§Æ‡•ç‡§Æ‡§ö" },  
  { ch:"üî™", voice:"‡§ö‡§æ‡§ï‡•Ç" },  
  { ch:"üöÖ", voice:"‡§ü‡•ç‡§∞‡•á‡§®" },  
  { ch:"‚òÄÔ∏è", voice:"‡§∏‡•Ç‡§∞‡§ú" },  
  { ch:"üåô", voice:"‡§ö‡§æ‡§Ç‡§¶" },  
  { ch:"‚òÅÔ∏è", voice:"‡§¨‡§æ‡§¶‡§≤" },  
  { ch:"üçé", voice:"‡§∏‡•á‡§¨" },  
  { ch:"üçå", voice:"‡§ï‡•á‡§≤‡§æ" },  
  { ch:"üçì", voice:"‡§∏‡•ç‡§ü‡•ç‡§∞‡•â‡§¨‡•á‡§∞‡•Ä" },  
  { ch:"üéà", voice:"‡§¨‡§≤‡•Ç‡§®" },  
  { ch:"üéÄ", voice:"‡§∞‡§ø‡§¨‡§®" },  
  { ch:"üê•", voice:"‡§ö‡§ø‡§°‡§º‡§ø‡§Ø‡§æ" },  
  { ch:"ü•≠", voice:"‡§Ü‡§Æ" },  
  { ch:"üçä", voice:"‡§∏‡§Ç‡§§‡§∞‡§æ" },  
  { ch:"üçÖ", voice:"‡§ü‡§Æ‡§æ‡§ü‡§∞" },  
  { ch:"üçê", voice:"‡§®‡§æ‡§∂‡§™‡§æ‡§§‡•Ä" },  
  { ch:"üçè", voice:"‡§π‡§∞‡§æ ‡§∏‡•á‡§¨" },  
  { ch:"üåÄ", voice:"‡§ö‡§ï‡•ç‡§∞" },  
  { ch:"üçâ", voice:"‡§§‡§∞‡§¨‡•Ç‡§ú" },  
  { ch:"üå±", voice:"‡§™‡•å‡§ß‡§æ" },  
  { ch:"üå∂Ô∏è", voice:"‡§Æ‡§ø‡§∞‡•ç‡§ö" },  
  { ch:"üçÜ", voice:"‡§¨‡•à‡§Ç‡§ó‡§®" },  
  { ch:"ü•ö", voice:"‡§Ö‡§Ç‡§°‡§æ" },  
  { ch:"üçû", voice:"‡§¨‡•ç‡§∞‡•á‡§°" },  
  { ch:"ü•ï", voice:"‡§ó‡§æ‡§ú‡§∞" },  
  { ch:"üçÑ", voice:"‡§Æ‡§∂‡§∞‡•Ç‡§Æ" },  
  { ch:"ü´ë", voice:"‡§∂‡§ø‡§Æ‡§≤‡§æ ‡§Æ‡§ø‡§∞‡•ç‡§ö" },  
  { ch:"üç°", voice:"‡§≤‡§°‡•ç‡§°‡•Ç" },  
  { ch:"üç™", voice:"‡§™‡§ø‡§ú‡•ç‡§ú‡§æ" },  
  { ch:"ü´ñ", voice:"‡§ï‡•á‡§§‡§≤‡•Ä" },  
  { ch:"üõñ", voice:"‡§ù‡•ã‡§™‡§°‡§º‡•Ä" },  
  { ch:"üñåÔ∏è", voice:"‡§¨‡•ç‡§∞‡§∂" }  
],  
};  
const MAX_DRAWINGS = {};  
Object.keys(DATA).forEach(key => {  
  MAX_DRAWINGS[key] = DATA[key].length;  
});  
/* ================= BASIC ================= */  
const base=document.getElementById("base");  
const draw=document.getElementById("draw");  
const stage = document.getElementById("stage");  
const bctx=base.getContext("2d");  
const dctx=draw.getContext("2d");  
const DPR=window.devicePixelRatio||1;  
   
  
/* ================= BASIC STATE ================= */  
let mode="vyanjan",index=0;  
let appStarting = true;  
  
/* ================= NAME ================= */  
let child=localStorage.getItem("CHILD")||"";  
nameBtn.innerText=child||"Name";  
nameBtn.onclick=()=>{  
  const n=prompt("‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§®‡§æ‡§Æ",child);  
  if(n){  
    child=n.trim();  
    localStorage.setItem("CHILD",child);  
    nameBtn.innerText=child;  
  }  
};  
  
/* ================= HELP (FINAL LONG PRESS CALL ‚Äì FIXED) ================= */  
  
const helpBtn = document.getElementById("helpBtn");  
  
let helpTimer = null;  
let helpStart = 0;  
let helpLastSpoken = 0;  
let helpReachedTen = false;  
  
function speakHelp(text){  
  speechSynthesis.cancel();  
  const u = new SpeechSynthesisUtterance(text);  
  u.lang = "hi-IN";  
  u.rate = 0.9;  
  u.pitch = 1.1;  
  speechSynthesis.speak(u);  
}  
  
function stopHelpAll(){  
  clearInterval(helpTimer);  
  helpTimer = null;  
  speechSynthesis.cancel();  
}  
  
helpBtn.addEventListener("pointerdown", e=>{  
  e.preventDefault();  
  
  stopHelpAll();  
  
  helpStart = Date.now();  
  helpLastSpoken = 0;  
  helpReachedTen = false;  
  
  // ‡§™‡§π‡§≤‡•Ä ‡§Ü‡§µ‡§æ‡§ú  
  speakHelp("‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§π‡•á‡§§‡•Å ‡§π‡•á‡§≤‡•ç‡§™ ‡§¨‡§ü‡§® ‡§ï‡•ã ‡§Æ‡§ø‡§®‡§ø‡§Æ‡§Æ ‡§¶‡§∏ ‡§∏‡•á‡§ï‡§Ç‡§° ‡§§‡§ï ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§∞‡§ñ‡•á‡§Ç");  
  
  helpTimer = setInterval(()=>{  
    const elapsed = Math.floor((Date.now() - helpStart) / 1000);  
  
    // 6‚Äì9 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§ï‡•Ä ‡§ó‡§ø‡§®‡§§‡•Ä  
    if(elapsed >= 6 && elapsed <= 9 && elapsed !== helpLastSpoken){  
      helpLastSpoken = elapsed;  
      speakHelp(elapsed.toString());  
    }  
  
    // ‡§†‡•Ä‡§ï 10 ‡§∏‡•á‡§ï‡§Ç‡§°  
    if(elapsed === 10 && !helpReachedTen){  
      helpReachedTen = true;  
      helpLastSpoken = 10;  
      speakHelp("‡§¶‡§∏‡•§ ‡§Ö‡§¨ ‡§¨‡§ü‡§® ‡§õ‡•ã‡§°‡§º ‡§¶‡•á‡§Ç");  
    }  
  
  }, 200);  
});  
  
helpBtn.addEventListener("pointerup", ()=>{  
  const total = Math.floor((Date.now() - helpStart) / 1000);  
  stopHelpAll();  
  
  if(total >= 10){  
    window.location.href = "tel:6393998216";  
  }  
});  
  
helpBtn.addEventListener("pointerleave", stopHelpAll);  
helpBtn.addEventListener("pointercancel", stopHelpAll);  
  
/* ================= CANVAS RESIZE (FINAL SAFE) ================= */  
function resize(){
  
  const r = stage.getBoundingClientRect();  
  
  [base, draw].forEach(c=>{  
    c.width  = Math.floor(r.width * DPR);  
    c.height = Math.floor(r.height * DPR);  
    c.style.width  = r.width + "px";  
    c.style.height = r.height + "px";  
  });  
  
  bctx.setTransform(DPR,0,0,DPR,0,0);  
  dctx.setTransform(DPR,0,0,DPR,0,0);  
  
  drawBase();  
  loadPage();  
}  
  
window.addEventListener("resize", resize);  
window.addEventListener("orientationchange", resize);  
  
// ===== FIXED drawBase (replace ‡§∏‡§≠‡•Ä ‡§™‡•Å‡§∞‡§æ‡§®‡•á drawBase ‡§ï‡•ã ‡§Ø‡§π‡•Ä ‡§∏‡•á) =====  
function drawBase(){  
  const it = DATA[mode][index];  
  bctx.clearRect(0,0,base.width,base.height);  
  
  bctx.textAlign = "center";  
  bctx.textBaseline = "middle";  
  bctx.font = "240px Arial";  
  
  if(mode === "art"){  
    bctx.globalAlpha = 0.25;  
    bctx.fillStyle = "#000";  
  } else {  
    bctx.globalAlpha = 1;  
    bctx.fillStyle = "#ddd";  
  }  
  
  bctx.fillText(  
    it.ch,  
    base.width / DPR / 2,  
    base.height / DPR / 2  
  );  
  
  bctx.globalAlpha = 1; // reset  
}  
  
/* ================= TOOLS ================= */  
const sizes=[6,10,16,22];  
let sizeIndex=1;  
// ===== CURRENT SELECTED TOOL =====  
let currentTool = "pen"; // pen | color | pattern | eraser  
// ===== ERASER SIZES (INDEPENDENT) =====  
const eraserSizes = [12, 20, 30, 45];  
let eraserSizeIndex = 1;  
  
const colors=["#e53935","#43a047","#fdd835","#fb8c00","#8e24aa","#6d4c41","#000000","#ffffff","#757575","#26c6da","#d81b60","#7cb342","#c0ca33","#ff7043","#5e35b1","#00897b","#f06292","#90a4ae","#a1887f","#FFD700","#C9B037","#E6BE8A","#C0C0C0","#BFC1C2","#8E8E93","#CD7F32","#B87333","#1e88e5"];  
let colorIndex=0;  
const sizeNames = [  
  "‡§õ‡•ã‡§ü‡•Ä ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤",  
  "‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤",  
  "‡§¨‡§°‡§º‡•Ä ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤",  
  "‡§¨‡§π‡•Å‡§§ ‡§¨‡§°‡§º‡•Ä ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤"  
];  
  
const eraserNames = [  
  "‡§õ‡•ã‡§ü‡§æ ‡§∞‡§¨‡§∞",  
  "‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§∞‡§¨‡§∞",  
  "‡§¨‡§°‡§º‡§æ ‡§∞‡§¨‡§∞",  
  "‡§¨‡§π‡•Å‡§§ ‡§¨‡§°‡§º‡§æ ‡§∞‡§¨‡§∞"  
];  
  
const colorNames = [  
  "‡§≤‡§æ‡§≤ ‡§∞‡§Ç‡§ó",  
  "‡§π‡§∞‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§™‡•Ä‡§≤‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§¨‡•à‡§Ç‡§ó‡§®‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§≠‡•Ç‡§∞‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§ï‡§æ‡§≤‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§∏‡§´‡•á‡§¶ ‡§∞‡§Ç‡§ó",  
  "‡§∏‡•ç‡§≤‡•á‡§ü‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§Ü‡§∏‡§Æ‡§æ‡§®‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§ó‡•Å‡§≤‡§æ‡§¨‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§π‡§≤‡•ç‡§ï‡§æ ‡§π‡§∞‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§®‡•Ä‡§Ç‡§¨‡•Ç ‡§∞‡§Ç‡§ó",  
  "‡§Æ‡•Ç‡§Ç‡§ó‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§ó‡§π‡§∞‡§æ ‡§¨‡•à‡§Ç‡§ó‡§®‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§´‡§ø‡§∞‡•ã‡§ú‡§º‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§π‡§≤‡•ç‡§ï‡§æ ‡§ó‡•Å‡§≤‡§æ‡§¨‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§®‡•Ä‡§≤‡§æ ‡§∏‡•ç‡§≤‡•á‡§ü‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§∞‡§Ç‡§ó",  
  "‡§®‡•Ä‡§≤‡§æ ‡§∞‡§Ç‡§ó",  
  "‡§ó‡•ã‡§≤‡•ç‡§°‡§® ‡§∞‡§Ç‡§ó",  
  "‡§ó‡§π‡§∞‡§æ ‡§ó‡•ã‡§≤‡•ç‡§°‡§® ‡§∞‡§Ç‡§ó",  
  "‡§π‡§≤‡•ç‡§ï‡§æ ‡§ó‡•ã‡§≤‡•ç‡§°‡§® ‡§∞‡§Ç‡§ó",  
  "‡§∏‡§ø‡§≤‡•ç‡§µ‡§∞ ‡§∞‡§Ç‡§ó",  
  "‡§π‡§≤‡•ç‡§ï‡§æ ‡§∏‡§ø‡§≤‡•ç‡§µ‡§∞ ‡§∞‡§Ç‡§ó",  
  "‡§ó‡§π‡§∞‡§æ ‡§∏‡§ø‡§≤‡•ç‡§µ‡§∞ ‡§∞‡§Ç‡§ó",  
  "‡§¨‡•ç‡§∞‡•â‡§®‡•ç‡§ú ‡§∞‡§Ç‡§ó",  
  "‡§ï‡•â‡§™‡§∞ ‡§∞‡§Ç‡§ó"  
];  
  
const patternNames = [  
  "‡§∏‡•ç‡§ü‡§æ‡§∞ ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®",  
  "‡§´‡•Ç‡§≤ ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®",  
  "‡§π‡§æ‡§∞‡•ç‡§ü ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®",  
  "‡§∞‡•ã‡§ú ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§¨‡§≤‡•Ç‡§® ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§´‡§æ‡§Ø‡§∞ ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§è‡§™‡•ç‡§™‡§≤ ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§§‡§ø‡§∞‡§Ç‡§ó‡§æ ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§´‡•ç‡§≤‡•à‡§ó ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§™‡§Ç‡§ú‡§æ ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§Æ‡§®‡•Ä ‡§°‡§ø‡§ú‡§æ‡§á‡§®",  
  "‡§Æ‡§õ‡§≤‡•Ä ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®"  
];  
/* ================= KIDS SHAPES PATTERN BRUSH ================= */  
let patternIndex = 0;  
const patterns = ["‚≠ê","üåº","‚ù§Ô∏è","üåπ","üéà","üî•","üçé","üáÆüá≥","üö©","üñêÔ∏è","üíµ","üêü"]; // Kids-friendly  
  
function cyclePattern(){  
  if(currentTool !== "pattern"){  
    currentTool = "pattern";  
    isEraser = false;  
    speakText(patternNames[patternIndex]);  
    return;  
  }  
  
  patternIndex = (patternIndex + 1) % patterns.length;  
  speakText(patternNames[patternIndex]);  
}  
  
function makePattern(){  
  const unit = sizes[sizeIndex] * 1.8;  
  const pc = document.createElement("canvas");  
  pc.width = unit;  
  pc.height = unit;  
  
  const cx = pc.getContext("2d");  
  cx.fillStyle = colors[colorIndex];  
  cx.font = unit + "px sans-serif";  
  cx.textAlign = "center";  
  cx.textBaseline = "middle";  
  
  cx.clearRect(0,0,unit,unit);  
  cx.fillText(patterns[patternIndex], unit/2, unit/2);  
  
  return dctx.createPattern(pc,"repeat");  
}  
  
/* ================= LICENSE SYSTEM ================= */  
  
// ===== Activation ID =====  
let actIdVal = localStorage.getItem("ACT_ID");  
if(!actIdVal){  
  actIdVal = "C-" + Math.floor(Math.random()*1e12);  
  localStorage.setItem("ACT_ID", actIdVal);  
}  
actId.innerText = actIdVal;  
  
// ===== Trial =====  
const TRIAL_MS = 5*60*1000;  
let trialStart = +localStorage.getItem("TRIAL_START") || Date.now();  
localStorage.setItem("TRIAL_START", trialStart);  
  
// ===== HIDDEN SECRET =====  
function _k1(){ return [72,73,78,68,73]; }   // H I N D I  
function _k2(){ return [64,50,48,50,53]; }   // @2025  
function _k3(){ return [33,91,42]; }         // noise  
  
function buildSecret(){  
  return _k1()  
    .concat(_k3())  
    .concat(_k2())  
    .map(c=>String.fromCharCode(c))  
    .join("");  
}  
  
// ===== STRONG HASH =====  
function hash(str){

  let out = "";

  let seed = 2166136261;

  while(out.length < 12){

    for(let i=0;i<str.length;i++){
      seed ^= str.charCodeAt(i);
      seed += (seed<<1)+(seed<<4)+(seed<<7)+(seed<<8)+(seed<<24);
    }

    out += (seed >>> 0).toString(36);
    seed ^= out.length;
  }

  return out.slice(0,12).toUpperCase();
}
  
// ===== FINAL SECURE CODE (PLAN HIDDEN) =====
function genCode(planDays){

  const raw =
    actIdVal +                 // device specific
    buildSecret() +            // secret
    planDays +                 // üî• PLAN INSIDE (hidden)
    actIdVal.split("-")[1].slice(0,4);

  return hash(raw).slice(0,12).toUpperCase();
}
  
// ===== LICENSE CHECK =====  
function checkLicense(){  
  const exp = +localStorage.getItem("PLAN_EXP") || 0;  
  if(Date.now() < exp){  
    planInfo.innerText =  
      "Valid till " + new Date(exp).toLocaleDateString();  
    license.style.display = "none";  
    return;  
  }  
  if(Date.now() - trialStart > TRIAL_MS){  
    license.style.display = "block";  
  }  
}  
setInterval(checkLicense,1000);  
  
function activate(){

  const val = code.value.trim().toUpperCase();

  let days = 0;

  if(val === genCode(15)) days = 15;
  else if(val === genCode(30)) days = 30;
  else if(val === genCode(365)) days = 365;
  else{
    alert("Invalid Activation Code");
    return;
  }

  const exp = Date.now() + days*24*60*60*1000;
  localStorage.setItem("PLAN_EXP", exp);

  license.style.display = "none";

  alert(
    days === 15 ? "15 ‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•ç‡§≤‡§æ‡§® ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ ‡§π‡•Å‡§Ü" :
    days === 30 ? "1 ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§™‡•ç‡§≤‡§æ‡§® ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ ‡§π‡•Å‡§Ü" :
    "1 ‡§∏‡§æ‡§≤ ‡§ï‡§æ ‡§™‡•ç‡§≤‡§æ‡§® ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ ‡§π‡•Å‡§Ü"
  );
}
  
// ===== CONTACT =====  
function callNow(){  
  location.href = "tel:+916393998216";  
}  
function waNow(){  
  location.href =  
    "https://wa.me/916393998216?text=" +  
    encodeURIComponent("Activation ID: " + actIdVal);  
}  
/* ================= PAGE + MODE SYSTEM ================= */  
  
function setMode(m){  
  if(drawing) savePage();  
  mode = m;  
  index = 0;  
  loadPage();  
  speak();  
}  
  
/* ===== PAGE FLIP LOCK ===== */  
let flipping = false;  
  
function nextPage(){  
  if(flipping) return;  
  flipping = true;  
  
  // üëâ next index  
  index = (index + 1) % DATA[mode].length;  
  
  // üß† LAST PAGE SAVE (‡§Ø‡§π‡•Ä main line ‡§π‡•à)  
  localStorage.setItem("LAST_MODE", mode);  
  localStorage.setItem("LAST_INDEX", index);  
  
  loadPage();  
  playFlipAndSpeak();  
  
  setTimeout(()=>flipping=false,150);  
}  
  
function prevPage(){  
  if(flipping) return;  
  flipping = true;  
  
  // üëâ previous index  
  index = (index - 1 + DATA[mode].length) % DATA[mode].length;  
  
  // üß† LAST PAGE SAVE (‡§Ø‡§π‡•Ä main line ‡§π‡•à)  
  localStorage.setItem("LAST_MODE", mode);  
  localStorage.setItem("LAST_INDEX", index);  
  
  loadPage();  
  playFlipAndSpeak();  
  
  setTimeout(()=>flipping=false,150);  
}  
  
function playFlipAndSpeak(){  
  speak();  
}  
  
/* ================= VOICE ================= */  
function speak(){  
  if(!window.speechSynthesis) return;  
  
  speechSynthesis.cancel();  
  
  const it = DATA[mode][index];  
  const name = child ? child + " " : "";  
  const bol = name + it.voice + " ‡§¨‡§®‡§æ‡§ì";  
  
  const u = new SpeechSynthesisUtterance(bol);  
  u.lang = "hi-IN";  
  u.rate = 0.9;  
  u.pitch = 1.1;  
  
  speechSynthesis.speak(u);  
}  
  
function speakText(text){  
  if(!window.speechSynthesis) return;  
  
  speechSynthesis.cancel();  
  
  const u = new SpeechSynthesisUtterance(text);  
  u.lang = "hi-IN";  
  u.rate = 0.9;  
  u.pitch = 1.1;  
  
  speechSynthesis.speak(u);  
}  
  
/* ========= FINAL DRAW + SAVE + PAGE SYSTEM (STABLE) ========= */  
/* ===== STORAGE SIZE (BYTES) ===== */  
function storageSize(){  
  let total = 0;  
  for(let k in localStorage){  
    if(!localStorage.hasOwnProperty(k)) continue;  
    total += localStorage[k].length * 2; // UTF-16  
  }  
  return total;  
}  
  
/* ===== GLOBAL STORAGE LIMIT (SAFE) ===== */  
const MAX_STORAGE = 4.5 * 1024 * 1024; // 4.5 MB  
  
/* =====================================================
   FINAL STORAGE CLEANUP (TIME INSIDE INDEXEDDB RECORD)
   ===================================================== */

/*
  Assumption (ALREADY DONE BY YOU):
  storageSave(key, { image, time })
  storageLoad(key, cb)
  storageDelete(key)
*/

// üî• MAX PAGES LIMIT (‡§ú‡§ø‡§§‡§®‡§æ ‡§§‡•Å‡§Æ‡§®‡•á ‡§™‡§π‡§≤‡•á ‡§∞‡§ñ‡§æ ‡§•‡§æ ‡§µ‡§π‡•Ä ‡§∞‡§ñ‡•ã)
const MAX_DRAW_PAGES = 196;

/* ---------- CLEANUP STORAGE ---------- */
function cleanupStorage(){

  storageGetAll((records)=>{

    // records = [{ key, value:{image,time} }, ...]

    if(!records || records.length <= MAX_DRAW_PAGES) return;

    // ‚è±Ô∏è oldest first
    records.sort((a,b)=>a.value.time - b.value.time);

    const excess = records.length - MAX_DRAW_PAGES;

    for(let i=0;i<excess;i++){
      storageDelete(records[i].key);
    }

  });
}

/* ---------- STORAGE HELPERS (INDEXEDDB FIRST, FALLBACK SAFE) ---------- */
function storageGetAll(cb){

  if(!window.indexedDB){
    // fallback ‚Üí localStorage
    const list = [];
    for(let k in localStorage){
      if(k.startsWith("DRAW_")){
        try{
          const v = JSON.parse(localStorage.getItem(k));
          if(v && v.time) list.push({ key:k, value:v });
        }catch(e){}
      }
    }
    cb(list);
    return;
  }

  const req = indexedDB.open(DB_NAME,1);

  req.onsuccess = e=>{
    const db = e.target.result;
    const tx = db.transaction("drawings","readonly");
    const store = tx.objectStore("drawings");

    const list = [];
    store.openCursor().onsuccess = ev=>{
      const cursor = ev.target.result;
      if(cursor){
        if(cursor.value && cursor.value.time){
          list.push({ key:cursor.key, value:cursor.value });
        }
        cursor.continue();
      }else{
        cb(list);
      }
    };
  };

  req.onerror = ()=>cb([]);
}
  
/* ===== SAVE / LOAD (ABSOLUTE SAFE) ===== */  
function savePage(){

  // üö´ ‡§¨‡§ø‡§®‡§æ ‡§è‡§ï ‡§≠‡•Ä drawing ‚Üí save ‡§®‡§π‡•Ä‡§Ç
  if(!hasDrawn) return;

  try{
    cleanupStorage();

    const key = `DRAW_${mode}_${index}`;
    const url = draw.toDataURL("image/jpeg", 0.6);

    storageSave(key, {
      image: url,
      time: Date.now()
    });

  }catch(e){
    console.warn("Save skipped");
  }
}
  
function loadPage(){

  // ‚úÖ CURRENT PAGE REMEMBER (FINAL FIX)
  localStorage.setItem("LAST_MODE", mode);
  localStorage.setItem("LAST_INDEX", index);

  // üî¥ IMPORTANT: default ‚Üí no drawing
  hasDrawn = false;

  // canvas clear + base
  dctx.clearRect(0,0,draw.width,draw.height);
  drawBase();

  const key = `DRAW_${mode}_${index}`;

  storageLoad(key, data => {

    if(!data || !data.image) return;

    const img = new Image();

    img.onload = () => {
      dctx.drawImage(
        img,
        0,
        0,
        draw.width / DPR,
        draw.height / DPR
      );

      // ‚úÖ image ‡§Æ‡§ø‡§≤‡•Ä ‚Üí drawing exists
      hasDrawn = true;
    };

    img.src = data.image;
  });
}
  
/* ===== AUTO SAVE (SAFE ‚Äì NEVER SAVE BLANK) ===== */  
// üîê TRUE ‡§§‡§≠‡•Ä ‡§π‡•ã‡§ó‡§æ ‡§ú‡§¨ ‡§∏‡§ö ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ draw ‡§π‡•Å‡§Ü ‡§π‡•ã
let hasDrawn = false;
/* ===== DRAW STATE ===== */  
let drawing=false;  
let lastX=0,lastY=0;  
let activePointer=null;  
let zone=null;  
let isEraser=false;  
let previousTool = "pen";  
  
/* ===== POINTER POSITION FIX (NO SHIFT) ===== */  
function getPos(e){  
  const r = draw.getBoundingClientRect();  
  return {  
    x: e.clientX - r.left,  
    y: e.clientY - r.top  
  };  
}  
  
  
draw.addEventListener("pointerdown", e => {  
  e.preventDefault();  
  draw.setPointerCapture(e.pointerId);  
  
  if(activePointer !== null) return;  
  activePointer = e.pointerId;  
  
  const r = draw.getBoundingClientRect();  
  const x = e.clientX - r.left;  
  
    
  zone = "draw";  
  drawing = true;  
  
  const p = getPos(e);  
  lastX = p.x;  
  lastY = p.y;  
  
  dctx.lineCap = "round";  
  dctx.lineJoin = "round";  
  if(isEraser){  
  dctx.lineWidth = eraserSizes[eraserSizeIndex];  
}else{  
  dctx.lineWidth = sizes[sizeIndex];  
}  
  // ===== F I N A L : Pattern Brush / Pencil / Eraser =====  
  if (isEraser) {

  // üî• HARD RESET ‚Äî NO PATTERN / NO COLOR EFFECT
  dctx.globalCompositeOperation = "destination-out";
  dctx.strokeStyle = "rgba(0,0,0,1)"; // dummy solid color
  dctx.fillStyle   = "rgba(0,0,0,1)";
  dctx.setLineDash([]);              // safety

  }else{  
    dctx.globalCompositeOperation = "source-over";  
  
   if(currentTool === "pattern"){  
     dctx.strokeStyle = makePattern();  
  }else{  
    dctx.strokeStyle = colors[colorIndex];  
  }  
  }  
});  
  
  draw.addEventListener("pointermove", e => {
  if(!drawing || e.pointerId !== activePointer || zone !== "draw") return;
  e.preventDefault();

  const p = getPos(e);

  hasDrawn = true; // üî• draw ‡§π‡•Å‡§Ü

  dctx.beginPath();
  dctx.moveTo(lastX, lastY);
  dctx.lineTo(p.x, p.y);
  dctx.stroke();

  lastX = p.x;
  lastY = p.y;
});
  
draw.addEventListener("pointerup", e => {  
  if(e.pointerId !== activePointer) return;  
  drawing = false;  
  draw.releasePointerCapture(e.pointerId);  
  savePage(); // ‚úÖ ‡§∏‡•Ä‡§ß‡•á save  
  activePointer = null;  
  zone = null;  
  // ‡§∞‡§¨‡§°‡§º ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§™‡§ø‡§õ‡§≤‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§Ü ‡§ú‡§æ‡§è‡§Ç  
  if(isEraser){  
   
   dctx.globalCompositeOperation = "source-over";

    isEraser = false;  
    currentTool = previousTool;  
    speakText("‡§∞‡§¨‡§°‡§º ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ"); // ‡§∞‡§¨‡§°‡§º ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú  
  }  
});  
  
draw.addEventListener("pointercancel", () => {  
  drawing = false;  
  activePointer = null;  
  zone = null;  
});  
  
/* ===== TOOLS ===== */  
function eraser(){  
  if(isEraser){  
    eraserSizeIndex = (eraserSizeIndex + 1) % eraserSizes.length;  
  }  
  previousTool = currentTool; // ‡§™‡§ø‡§õ‡§≤‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•ã ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§ï‡§∞‡•á‡§Ç  
  currentTool = "eraser";  
  isEraser = true;  
  speakText(eraserNames[eraserSizeIndex]);  
}  
  
function cycleColor(){  
  if(currentTool !== "color"){  
    currentTool = "color";  
    isEraser = false;  
  
    speakText(colorNames[colorIndex]);  
    return;  
  }  
  
  colorIndex = (colorIndex + 1) % colors.length;  
  speakText(colorNames[colorIndex]);  
}  
  
function cycleSize(){  
  // ‡§Ö‡§ó‡§∞ ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤ select ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à  
  if(currentTool !== "pen"){  
    currentTool = "pen";  
    isEraser = false;  
  
    speakText(sizeNames[sizeIndex]);  
    return;  
  }  
  
  // ‡§Ö‡§ó‡§∞ ‡§™‡•á‡§Ç‡§∏‡§ø‡§≤ ‡§™‡§π‡§≤‡•á ‡§∏‡•á selected ‡§π‡•à ‚Üí size ‡§¨‡§¶‡§≤‡•á  
  sizeIndex = (sizeIndex + 1) % sizes.length;  
  speakText(sizeNames[sizeIndex]);  
}  
  
/* ========= CLEAR BUTTON : SINGLE + DOUBLE TAP (FINAL FIX) ========= */

const clearBtn = document.getElementById("clearBtn");
const yesBox  = document.getElementById("yesBox");

let clearTapCount = 0;
let clearTapTimer = null;
let clearModeArmed = false;

/* üëá CLEAR BUTTON TAP HANDLER */
clearBtn.addEventListener("pointerdown", e=>{
  e.preventDefault();

  clearTapCount++;

  // ‚è±Ô∏è SINGLE TAP ‚Üí current page
  if(clearTapCount === 1){
    clearTapTimer = setTimeout(()=>{
      clearTapCount = 0;

      dctx.clearRect(0,0,draw.width,draw.height);

      storageDelete(`DRAW_${mode}_${index}`);
      

      hasDrawn = false;
      loadPage();

      speakText("‡§™‡•á‡§ú‡§º ‡§∏‡§æ‡§´‡§º ‡§π‡•ã ‡§ó‡§Ø‡§æ");
    },300);
  }

  // üß® DOUBLE TAP ‚Üí mode clear
  else if(clearTapCount === 2){
    clearTimeout(clearTapTimer);
    clearTapCount = 0;

    clearModeArmed = true;
    yesBox.value = "";
    yesBox.style.display = "block";
    yesBox.focus();

    speakText("‡§á‡§∏ ‡§Æ‡•ã‡§° ‡§ï‡•Ä ‡§∏‡§≠‡•Ä ‡§°‡•ç‡§∞‡§æ‡§á‡§Ç‡§ó ‡§Æ‡§ø‡§ü‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è YES ‡§≤‡§ø‡§ñ‡§ø‡§è");
  }
});

/* üëá YES CONFIRM HANDLER */
yesBox.addEventListener("keydown", e=>{
  if(!clearModeArmed) return;

  if(e.key === "Enter"){
    if(yesBox.value.trim().toLowerCase() !== "yes"){
      speakText("‡§ï‡•É‡§™‡§Ø‡§æ YES ‡§≤‡§ø‡§ñ‡•á‡§Ç");
      return;
    }

    clearModeArmed = false;
    yesBox.style.display = "none";
    yesBox.value = "";

    storageDeleteByPrefix(`DRAW_${mode}_`);

    dctx.clearRect(0,0,draw.width,draw.height);
    loadPage();

    speakText("‡§á‡§∏ ‡§Æ‡•ã‡§° ‡§ï‡•Ä ‡§∏‡§≠‡•Ä ‡§°‡•ç‡§∞‡§æ‡§á‡§Ç‡§ó ‡§∏‡§æ‡§´‡§º ‡§π‡•ã ‡§ó‡§à");
  }
});
/* ===== YES BOX OUTSIDE TAP TO CLOSE (FINAL FIX) ===== */

document.addEventListener("pointerdown", e => {

  // ‡§Ö‡§ó‡§∞ YES ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ñ‡•Å‡§≤‡§æ ‡§π‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‚Üí ‡§ï‡•Å‡§õ ‡§Æ‡§§ ‡§ï‡§∞‡•ã
  if (!clearModeArmed || yesBox.style.display !== "block") return;

  // ‡§Ö‡§ó‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï YES ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§π‡•Å‡§Ü ‡§π‡•à ‚Üí ignore
  if (yesBox.contains(e.target)) return;

  // ‡§Ö‡§ó‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï Clear ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§π‡•Å‡§Ü ‡§π‡•à ‚Üí ignore (double tap logic)
  if (clearBtn.contains(e.target)) return;

  // üëâ ‡§¨‡§æ‡§π‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§π‡•Å‡§Ü ‚Üí YES ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§¨‡§Ç‡§¶
  clearModeArmed = false;
  yesBox.style.display = "none";
  yesBox.value = "";

  speakText("‡§ï‡•ç‡§≤‡§ø‡§Ø‡§∞ ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ");
});

// === TOOL BUTTON SAFE DRAG + TAP (Boundary + Save) ===  
const tools = document.querySelectorAll(".tool");  
let dragEl = null;  
let startX = 0, startY = 0;  
let dragging = false;  
  
// --- RESTORE POSITIONS ---  
tools.forEach(btn=>{  
  const saved = localStorage.getItem("tool-pos-" + btn.dataset.tool);  
  if (saved){  
    const pos = JSON.parse(saved);  
    btn.style.left = pos.left;  
    btn.style.top  = pos.top;  
  }  
});  
  
tools.forEach(btn => {  
  
  btn.addEventListener("pointerdown", e => {  
    startX = e.clientX;  
    startY = e.clientY;  
    dragging = false;  
    dragEl = btn;  
    dragEl.setPointerCapture(e.pointerId);  
  });  
  
  btn.addEventListener("pointermove", e => {  
  if (!dragEl) return;  
  
  const r = stage.getBoundingClientRect();  
  
  let x = e.clientX - r.left - dragEl.offsetWidth / 2;  
  let y = e.clientY - r.top  - dragEl.offsetHeight / 2;  
  
  // üîí Y boundary (‡§∏‡§¨ tools ‡§ï‡•á ‡§≤‡§ø‡§è)  
  y = Math.max(0, Math.min(y, r.height - dragEl.offsetHeight));  
  
  // üîí PAGE BUTTONS (X fixed)  
  if (dragEl.dataset.tool === "prev") {  
    x = 0;  
  }   
  else if (dragEl.dataset.tool === "next") {  
    x = r.width - dragEl.offsetWidth;  
  }   
  else {  
    // üîí ‡§¨‡§æ‡§ï‡•Ä tools ‡§ï‡•á ‡§≤‡§ø‡§è full boundary  
    x = Math.max(0, Math.min(x, r.width - dragEl.offsetWidth));  
  }  
  
  if (!dragging && Math.hypot(e.clientX - startX, e.clientY - startY) > 10) {  
    dragging = true;  
  }  
  if (!dragging) return;  
  
  dragEl.style.left = x + "px";  
  dragEl.style.top  = y + "px";  
});  
  
  btn.addEventListener("pointerup", e => {  
  
  if (!dragEl) return;  
  
  const r = stage.getBoundingClientRect();  
  
  let x = dragEl.offsetLeft;  
  let y = dragEl.offsetTop;  
  
  const w = dragEl.offsetWidth;  
  const h = dragEl.offsetHeight;  
  
  // üîí PAGE BUTTONS ‚Äì fixed edges  
  if (dragEl.dataset.tool === "prev") {  
    dragEl.style.left = "0px";  
  }   
  else if (dragEl.dataset.tool === "next") {  
    dragEl.style.left = (r.width - w) + "px";  
  }   
  else {  
    // üß≤ SNAP TO NEAREST EDGE (4 sides)  
  
    const distLeft   = x;  
    const distRight  = r.width - (x + w);  
    const distTop    = y;  
    const distBottom = r.height - (y + h);  
  
    const min = Math.min(  
      distLeft, distRight, distTop, distBottom  
    );  
  
    if (min === distLeft) {  
      x = 0;  
    } else if (min === distRight) {  
      x = r.width - w;  
    } else if (min === distTop) {  
      y = 0;  
    } else if (min === distBottom) {  
      y = r.height - h;  
    }  
  
    dragEl.style.left = x + "px";  
    dragEl.style.top  = y + "px";  
  }  
  
  // üíæ position save  
  localStorage.setItem(  
    "tool-pos-" + dragEl.dataset.tool,  
    JSON.stringify({  
      left: dragEl.style.left,  
      top:  dragEl.style.top  
    })  
  );  
  
  dragEl = null;  
  dragging = false;  
});  
  
});  
  
/* ================= INIT ================= */  
// üß† App reopen ‡§™‡§∞ last page restore  
(function(){  
  const m = localStorage.getItem("LAST_MODE");  
  const i = localStorage.getItem("LAST_INDEX");  
  
  if(m && DATA[m]){  
    mode = m;  
    index = i ? parseInt(i,10) : 0;  
  }  
})();  
  
resize();  
appStarting = false;   // üîì ‡§Ö‡§¨ save allow ‡§π‡•à  
checkLicense();  
</script>  <script>  
if ("serviceWorker" in navigator) {  
  let newWorker;  
  
  navigator.serviceWorker.register("sw.js");  
  
  let refreshing = false;  
  
navigator.serviceWorker.addEventListener("controllerchange", () => {  
  if (refreshing) return;  
  refreshing = true;  
  window.location.reload();  
});  
  
  navigator.serviceWorker.getRegistration().then(reg => {  
    if (!reg) return;  
  
    if (reg.waiting) showUpdate(reg.waiting);  
  
    reg.addEventListener("updatefound", () => {  
      newWorker = reg.installing;  
      newWorker.addEventListener("statechange", () => {  
        if (newWorker.state === "installed" && navigator.serviceWorker.controller) {  
          showUpdate(newWorker);  
        }  
      });  
    });  
  });  
  
  function showUpdate(worker) {  
  
  // üîí ‡§Ö‡§ó‡§∞ ‡§™‡§π‡§≤‡•á ‡§∏‡•á update bar ‡§π‡•à ‡§§‡•ã ‡§®‡§Ø‡§æ ‡§Æ‡§§ ‡§¨‡§®‡§æ‡§ì  
  if (document.getElementById("update-bar")) return;  
  
  const bar = document.createElement("div");  
  bar.id = "update-bar";  
  
  bar.style.cssText = `  
    position:fixed;  
    bottom:10px;  
    left:10px;  
    right:10px;  
    background:#4caf50;  
    color:#fff;  
    padding:12px;  
    border-radius:10px;  
    font-size:16px;  
    display:flex;  
    justify-content:space-between;  
    align-items:center;  
    z-index:9999;  
  `;  
  
  bar.innerHTML = `  
    üîÑ ‡§®‡§Ø‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§Ü‡§Ø‡§æ ‡§π‡•à  
    <button style="padding:6px 12px;border:none;border-radius:6px">  
      Refresh  
    </button>  
  `;  
  
  bar.querySelector("button").onclick = () => {  
    worker.postMessage("SKIP_WAITING");  
  };  
  
  document.body.appendChild(bar);  
}  
}  
</script>  
</body>  
</html>